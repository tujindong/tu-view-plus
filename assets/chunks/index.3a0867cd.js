import{G as Ve,H as $e,I as _e,b as Be,c as Fe,a as ie,u as de,w as Me}from"./ResizeObserver.es.80bbd837.js";import{g as i,a3 as Q,l as e,M as V,h as w,j as ye,x as he,U as Le,z as Te,O as pe,d as Ie,E as Re,a2 as je,as as P,a5 as ze,a6 as De,o as v,c as k,n as h,r as U,e as I,k as M,b,w as L,I as X,L as ce,F as Ke,H as Ue,a1 as Ae,t as ve}from"./framework.78098380.js";import{i as me,V as Oe,f as T,c as Ge,v as He,h as We}from"./index.0baf59f6.js";import{m as qe}from"./typescript.defaf979.js";import{d as be}from"./error.0397081d.js";function Je(t){return t==null}const Y="update:modelValue",ha="change",Ia="input",ba=["onFocus","onFocusin","onFocusout","onBlur","onChange","onBeforeinput","onInput","onReset","onSubmit","onInvalid","onKeydown","onKeypress","onKeyup","onCopy","onCut","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onSelect","autocomplete","autofocus","maxlength","minlength","name","pattern","readonly","required"],xe=t=>{const a=Q();return i(()=>{var d,p;return(p=(d=a==null?void 0:a.proxy)==null?void 0:d.$props)==null?void 0:p[t]})},fe={prefix:Math.floor(Math.random()*1e4),current:0},Xe=Symbol("elIdInjection"),Ye=()=>Q()?V(Xe,fe):fe,Qe=t=>{const a=Ye(),d=Ve();return i(()=>e(t)||`${d.value}-id-${a.prefix}-${a.current++}`)},Ze=["class","style"],ea=/^on[A-Z]/,aa=(t={})=>{const{excludeListeners:a=!1,excludeKeys:d}=t,p=i(()=>((d==null?void 0:d.value)||[]).concat(Ze)),o=Q();return o?i(()=>{var m;return $e(Object.entries((m=o.proxy)==null?void 0:m.$attrs).filter(([c])=>!p.value.includes(c)&&!(a&&ea.test(c))))}):i(()=>({}))},Z=Symbol("formContextKey"),ge=Symbol("formItemContextKey"),we=()=>{const t=V(Z,void 0),a=V(ge,void 0);return{form:t,formItem:a}},ta=(t,{formItemContext:a,disableIdGeneration:d,disableIdManagement:p})=>{d||(d=w(!1)),p||(p=w(!1));const o=w();let m;const c=i(()=>{var l;return!!(!t.label&&a&&a.inputIds&&((l=a.inputIds)==null?void 0:l.length)<=1)});return ye(()=>{m=he([Le(t,"id"),d],([l,f])=>{const x=l??(f?void 0:Qe().value);x!==o.value&&(a!=null&&a.removeInputId&&(o.value&&a.removeInputId(o.value),!(p!=null&&p.value)&&!f&&x&&a.addInputId(x)),o.value=x)},{immediate:!0})}),Te(()=>{m&&m(),a!=null&&a.removeInputId&&o.value&&a.removeInputId(o.value)}),{isLabeledByFormItem:c,inputId:o}},na=(t,a={})=>{const d=w(void 0),p=a.prop?d:xe("size"),o=a.global?d:_e(),m=a.form?{size:void 0}:V(Z,void 0),c=a.formItem?{size:void 0}:V(ge,void 0);return i(()=>e(t)||p.value||(c==null?void 0:c.size)||(m==null?void 0:m.size)||o.value||"")},oa=t=>{const a=xe("disabled"),d=V(Z,void 0);return i(()=>a.value||e(t)||(d==null?void 0:d.disabled)||!1)},la=Be({id:{type:String,default:void 0},size:{...Fe,default:"medium"},disabled:Boolean,modelValue:{type:ie([String,Number,Object]),default:""},type:{type:String,default:"text"},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:me},prefixIcon:{type:me},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:ie([Object,Array,String]),default:()=>qe({})}}),sa={[Y]:t=>!0,input:t=>!0,change:t=>!0,focus:t=>!0,blur:t=>!0,clear:()=>!0,mouseleave:t=>!0,mouseenter:t=>!0,keydown:t=>!0,compositionstart:t=>!0,compositionupdate:t=>!0,compositionend:t=>!0};function ra(t,a,d){const p=w(!1),o=w(!1),m=w(!1),c=w(!1),l=i(()=>d.value),f=i(()=>Je(t.modelValue)?"":String(t.modelValue)),x=i(()=>f.value.length),{formItem:g}=we(),C=async()=>{var n;await pe(),(n=l.value)==null||n.focus()},$=()=>{var n;return(n=l.value)==null?void 0:n.blur()},_=()=>{var n;return(n=l.value)==null?void 0:n.select()},A=()=>{a(Y,""),a("change",""),a("clear"),a("input","")},O=n=>{p.value=!0,a("mouseenter",n)},G=n=>{p.value=!1,a("mouseleave",n)},B=n=>{a("compositionstart",n),m.value=!0},R=n=>{a("compositionupdate",n)},j=n=>{a("compositionend",n),m.value&&(m.value=!1,N(n))},N=async n=>{let{value:y}=n.target;if(t.formatter&&(y=t.parser?t.parser(y):y),!m.value){if(y===f.value){E();return}a(Y,y),a("input",y),await pe(),E()}},S=n=>{o.value=!0,a("focus",n)},H=n=>{var y;o.value=!1,a("blur",n),t.validateEvent&&((y=g==null?void 0:g.validate)==null||y.call(g,"blur").catch(q=>be()))},W=n=>{a("change",n.target.value)},z=n=>{a("keydown",n)},D=()=>{c.value=!c.value,C()},E=()=>{const n=l.value,y=t.formatter?t.formatter(f.value):f.value;!n||n.value===y||(n.value=y)};return he(f,()=>E()),{inputRef:l,isHovering:p,isFocused:o,isPasswordVisible:c,nativeInputValue:f,textLength:x,focus:C,blur:$,select:_,clear:A,handleMouseEnter:O,handleMouseLeave:G,handleCompositionStart:B,handleCompositionUpdate:R,handleCompositionEnd:j,handleInput:N,handleFocus:S,handleBlur:H,handleChange:W,handleKeydown:z,handlePasswordVisible:D,setNativeInputValue:E}}const ua=["role"],ia=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],da=Ie({name:"TuInput",inheritAttrs:!1}),pa=Ie({...da,props:la,emits:sa,setup(t,{expose:a,emit:d}){const p=Re(),o=t,m=d,c=je(),l=de("input"),f=de("input-group"),x=na(),g=oa(),C=aa({excludeKeys:i(()=>Object.keys(ue.value))}),{form:$,formItem:_}=we(),{inputId:A}=ta(o,{formItemContext:_}),{inputRef:O,isHovering:G,isFocused:B,isPasswordVisible:R,textLength:j,nativeInputValue:N,focus:S,blur:H,select:W,clear:z,handleMouseEnter:D,handleMouseLeave:E,handleCompositionStart:n,handleCompositionUpdate:y,handleCompositionEnd:q,handleInput:ee,handleFocus:ae,handleBlur:te,handleChange:ne,handleKeydown:oe,handlePasswordVisible:Ce,setNativeInputValue:Se}=ra(o,m,p),F=i(()=>(_==null?void 0:_.validateState)||""),le=i(()=>($==null?void 0:$.statusIcon)??!1),se=i(()=>F.value&&Oe[F.value]),Ee=i(()=>!!K.value&&j.value>Number(C.value.maxlength)),J=i(()=>o.clearable&&!g.value&&!o.readonly&&!!N.value&&(B.value||G.value)),re=i(()=>o.showPassword&&!g.value&&!o.readonly&&!!N.value&&(!!N.value||B.value)),K=i(()=>o.showWordLimit&&!!C.value.maxlength&&o.type==="text"&&!g.value&&!o.readonly&&!o.showPassword),ke=i(()=>!!c.suffix||!!o.suffixIcon||J.value||o.showPassword||K.value||!!F.value&&le.value),Ne=i(()=>({[l.b()]:!0,[l.m(x.value)]:x.value,[l.is("disabled")]:g.value,[l.is("exceed")]:Ee.value,[f.b()]:c.prepend||c.append,[f.m("prepend")]:c.prepend,[f.m("append")]:c.append,[P().class]:P().class})),Pe=i(()=>[P().style,o.inputStyle]),ue=i(()=>{const s={};return o.containerRole==="combobox"&&(s["aria-haspopup"]=P()["aria-haspopup"],s["aria-owns"]=P()["aria-owns"],s["aria-expanded"]=P()["aria-expanded"]),s});return ye(()=>{!o.formatter&&o.parser&&be(),Se()}),a({input:p,ref:O,focus:S,blur:H,select:W,clear:z}),(s,r)=>ze((v(),k("div",ce(ue.value,{class:Ne.value,style:Pe.value,role:s.containerRole,onMouseenter:r[11]||(r[11]=(...u)=>e(D)&&e(D)(...u)),onMouseleave:r[12]||(r[12]=(...u)=>e(E)&&e(E)(...u))}),[s.$slots.prepend?(v(),k("div",{key:0,class:h(e(f).e("prepend"))},[U(s.$slots,"prepend")],2)):I("",!0),M("div",{class:h([e(l).e("wrapper"),{[e(l).is("focus")]:e(B)}])},[s.$slots.prefix||s.prefixIcon?(v(),k("span",{key:0,class:h(e(l).e("prefix"))},[M("span",{class:h(e(l).e("prefix-inner")),onClick:r[0]||(r[0]=(...u)=>e(S)&&e(S)(...u))},[U(s.$slots,"prefix"),s.prefixIcon?(v(),b(e(T),{key:0,class:h(e(l).e("icon"))},{default:L(()=>[(v(),b(X(s.prefixIcon)))]),_:1},8,["class"])):I("",!0)],2)],2)):I("",!0),M("input",ce({ref_key:"input",ref:p},e(C),{id:e(A),class:e(l).e("inner"),type:s.showPassword?e(R)?"text":"password":s.type,disabled:e(g),formatter:s.formatter,parser:s.parser,readonly:s.readonly,autocomplete:s.autocomplete,tabindex:s.tabindex,"aria-label":s.label,placeholder:s.placeholder,style:s.inputStyle,form:e($),onCompositionstart:r[1]||(r[1]=(...u)=>e(n)&&e(n)(...u)),onCompositionupdate:r[2]||(r[2]=(...u)=>e(y)&&e(y)(...u)),onCompositionend:r[3]||(r[3]=(...u)=>e(q)&&e(q)(...u)),onInput:r[4]||(r[4]=(...u)=>e(ee)&&e(ee)(...u)),onFocus:r[5]||(r[5]=(...u)=>e(ae)&&e(ae)(...u)),onBlur:r[6]||(r[6]=(...u)=>e(te)&&e(te)(...u)),onChange:r[7]||(r[7]=(...u)=>e(ne)&&e(ne)(...u)),onKeydown:r[8]||(r[8]=(...u)=>e(oe)&&e(oe)(...u))}),null,16,ia),ke.value?(v(),k("span",{key:1,class:h(e(l).e("suffix"))},[M("span",{class:h(e(l).e("suffix-inner")),onClick:r[10]||(r[10]=(...u)=>e(S)&&e(S)(...u))},[!J.value||!re.value||!K.value?(v(),k(Ke,{key:0},[U(s.$slots,"suffix"),s.suffixIcon?(v(),b(e(T),{key:0,class:h(e(l).e("icon"))},{default:L(()=>[(v(),b(X(s.suffixIcon)))]),_:1},8,["class"])):I("",!0)],64)):I("",!0),J.value?(v(),b(e(T),{key:1,class:h([e(l).e("icon"),e(l).em("icon","clear")]),onMousedown:r[9]||(r[9]=Ae(()=>{},["prevent"])),onClick:e(z)},{default:L(()=>[Ue(e(Ge))]),_:1},8,["class","onClick"])):I("",!0),re.value?(v(),b(e(T),{key:2,class:h([e(l).e("icon"),e(l).em("icon","password")]),onClick:e(Ce)},{default:L(()=>[e(R)?(v(),b(e(He),{key:0})):(v(),b(e(We),{key:1}))]),_:1},8,["class","onClick"])):I("",!0),K.value?(v(),k("span",{key:3,class:h(e(l).e("count"))},[M("span",{class:h(e(l).e("count-inner"))},ve(e(j))+" / "+ve(e(C).maxlength),3)],2)):I("",!0),F.value&&se.value&&le.value?(v(),b(e(T),{key:4,class:h([e(l).e("icon"),e(l).e("validateIcon"),e(l).is("loading",F.value==="validating")])},{default:L(()=>[(v(),b(X(se.value)))]),_:1},8,["class"])):I("",!0)],2)],2)):I("",!0)],2),s.$slots.append?(v(),k("div",{key:1,class:h(e(f).e("append"))},[U(s.$slots,"append")],2)):I("",!0)],16,ua)),[[De,s.type!=="hidden"]])}}),xa=Me(pa);export{ta as A,ha as C,Ia as I,Y as U,Je as a,ba as b,aa as c,xa as i,Z as o,Qe as u,na as x,oa as y,we as z};
